#!/bin/sh

#
# General globals
#

# Source code folder
DIR="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && cd ../src && pwd )"
if [ -n "$1" ]; then
	DIR="$1"
fi

#
# PEP8 - Syntax checking
#
# Read more
#   http://pypi.python.org/pypi/pep8/
#
PEP8_INSTALLED="$(which pep8)"
if [ -z "$PEP8_INSTALLED" ] ; then
    easy_install pep8
fi

echo "========================================"
echo "PEP8 (pep8 --statistics  --show-source --show-pep8 $DIR)"
pep8 --statistics  --show-source --show-pep8 $DIR


#
# pylint - Syntax checking
#
# Read more
#   http://www.logilab.org/857
#

PYLINT_INSTALLED="$(which pylint)"
if [ -z "$PYLINT_INSTALLED" ] ; then
    easy_install pylint
fi

echo
echo "========================================"
echo "PYLINT (find $DIR -name '*.py' -exec pylint --reports=n --include-ids=y {} \;)"
find $DIR -name '*.py' -exec pylint --reports=n --include-ids=y {} \;

#
# pychecker
#
PYCHECKER_INSTALLED="$(which pychecker)"
if [ -z "$PYCHECKER_INSTALLED" ] ; then
    echo "ERROR: Install pychecker, you might find the files "
    echo "here http://sourceforge.net/projects/pychecker/files/"
    echo "Uncompress"
    echo "python setup.py build"
    echo "python setup.py install"
fi

echo
echo "========================================"
echo "PYCHECKER (find $DIR -name '*.py' -exec pychecker --only {} \;)"
find $DIR -name '*.py' -exec pychecker --only {} \;


#
# pyreverse - create uml and other from code
#
# http://www.logilab.org/6883
#pyreverse -o png -p Pyreverse $DIR

